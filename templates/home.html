<!DOCTYPE html>

<html>

  <head>
    <meta charset="UTF-8">
    <title>League of Legends</title>
	
	<!-- External CSS Page -->
	<link rel="stylesheet" type="text/css" href="{{url_for('static', filename='css.css')}}">

	<!-- Embedded CSS, overwrites external CSS -->
    <style type="text/css">
		<!-- background-color: green; -->
    </style>

  </head>
  
  <body>
	<!-- Top part of page -->
	<header id="header">
		<h1 style="color: white"> League of Legends </h1>
		<div id="search-bar">
			<form>
				<input type="text" name="search" placeholder="Search Keyword">
			</form>
		</div>
		
		<div id="header-emblems">
			<img src="static/resources/images/emblemsedited.png" />
		</div>
	</header>
	
	<!-- Navigator bar for links, wrapper div adds margins --> 
	<div id="wrapper">
		<nav id="nav-bar">
			<ul>
				<!-- Need to change class="active" when python changes page or on mouse over -->
				<li><a class="active" href="{{ url_for('index') }}"> Home </a></li>
				<li><a href="{{ url_for('playstyle') }}"> Playstyle </a></li>
				<li><a href="{{ url_for('profile') }}"> Login </a></li>
				<li><a href="{{ url_for('about') }}"> About </a></li>
			</ul>
		</nav>
		
		
		<div id="container-image-bar-outer">
			<div id="container-image-bar-top">
				<!-- Placeholder image -->
				<img src="static/resources/images/jax_edited.png" class="image-bar-image" image-bar-image-link="{{ url_for('jax') }}"/>
			</div>
				
			<div id="container-image-bar-bottom">
				<div id="container-image-bar">
					<!-- All of these images should be clickable and change page content -->
					<img src="static/resources/portraits/Malphite.png" class="image-bar-image" image-bar-image-link="{{ url_for('malphite') }}"/>
					<img src="static/resources/portraits/Riven.png" class="image-bar-image" image-bar-image-link="{{ url_for('riven') }}"/>
					<img src="static/resources/portraits/Irelia.png" class="image-bar-image" image-bar-image-link="{{ url_for('irelia') }}"/>
					<img src="static/resources/portraits/Singed.png" class="image-bar-image" image-bar-image-link="{{ url_for('singed') }}" />
					<img src="static/resources/portraits/Gnar.png" class="image-bar-image" image-bar-image-link="{{ url_for('gnar') }}"/>
					<img src="static/resources/portraits/Gangplank.png" class="image-bar-image" image-bar-image-link="{{ url_for('gangplank') }}"/>
					<img src="static/resources/portraits/Jax.png" class="image-bar-image" image-bar-image-link="{{ url_for('jax') }}" />
					<img src="static/resources/portraits/Poppy.png" class="image-bar-image" image-bar-image-link="{{ url_for('poppy') }}"/>
					<a href='#' class='button'>View All</a>
				</div>
			</div>
		</div>
			
		<!-- Javascript slider shenanigens, make sure the images are all the same size for a smooth animation -->
		<div class= "container">
			<div class="image-slider-wrapper">
				<ul id="image_slider">
					<!-- Placeholder images for slider -->
					<li><img src="static/resources/slider/all_stars.png" class="slide" image-link="http://www.lolesports.com/en_US/all-star/all_star_2016/schedule/default"/></li>
					<li><img src="static/resources/slider/worlds.png" class="slide" image-link="http://www.lolesports.com/en_US/worlds/world_championship_2016/about/"/></li>
					<li><img src="static/resources/slider/TSM.png" class="slide" image-link="http://www.tsm.gg"/></li>
					<li><img src="static/resources/slider/preseason.png" class="slide" image-link="https://www.youtube.com/watch?v=DZC_Zvo5HUI"/></li>
					<li><img src="static/resources/slider/reddit.png" class="slide" image-link="https://www.reddit.com/r/leagueoflegends/"/></li>
				</ul>
			</div>
		</div>
		
		<!-- Load template code into main-content -->
		<div class="main-content">
		<!--<svg></svg> -->
		
		{% block body %}{% endblock %}
		
		</div>
	</div>
	
	<!-- Footer links -->
	<footer id="footer">
		<div class="col">
		  <ul>
			<li><a href="{{ url_for('malphite') }}">Malphite</a></li>
			<li><a href="{{ url_for('irelia') }}">Irelia</a></li>
		  </ul>
		</div>
		<div class="col">
		  <ul>
			<li><a href="{{ url_for('riven') }}">Riven</a></li>
			<li><a href="{{ url_for('singed') }}">Singed</a></li>
		  </ul>
		</div>
		<div class="col">
		  <ul>
			<li><a href="{{ url_for('gnar') }}">Gnar</a></li>
			<li><a href="{{ url_for('gangplank') }}">Gangplank</a></li>
		  </ul>
		</div>
		<div class="col">
		  <ul>
			<li><a href="{{ url_for('jax') }}">Jax</a></li>
			<li><a href="{{ url_for('poppy') }}">Poppy</a></li>
		  </ul>
		</div>
	</footer>
	
	<script src="https://code.jquery.com/jquery-3.1.0.min.js"></script>
	<script src="http://d3js.org/d3.v3.min.js"></script>
    <script type="text/javascript">
		var ul;
		var li_items;
		var li_number;
		var image_number = 0;
		var slider_width = 0;
		var image_width;
		var current = 0;
		
		/* Initialize the slider */
		function init(){
			ul = document.getElementById('image_slider');
			li_items = ul.children;
			li_number = li_items.length;
			for (i = 0; i < li_number; i++){
					image_width = li_items[i].childNodes[0].clientWidth;
					slider_width += image_width;
					image_number++;
			}
			
			ul.style.width = parseInt(slider_width) + 'px';
			slider(ul);
		}
		
		/* Animation duration */
		function slider(){		
			animate({
				delay:17,
				duration: 6000,
				delta:function(p){return Math.max(0, -1 + 2 * p)},
				step:function(delta){
						ul.style.left = '-' + parseInt(current * image_width + delta * image_width) + 'px';
					},
				callback:function(){
					current++;
					if(current < li_number-1){
						slider();
					}
					else{
						var left = (li_number - 1) * image_width;					
						setTimeout(function(){goBack(left)},2000); 				
						setTimeout(slider, 4000);
					}
				}
			});
		}
		
		/* Go back to first image after last image */
		function goBack(left_limits){
			current = 0;	
			setInterval(function(){
				if(left_limits >= 0){
					ul.style.left = '-' + parseInt(left_limits) + 'px';
					left_limits -= image_width / 10;
				}	
			}, 17);
		}
		
		/* Animation */
		function animate(opts){
			var start = new Date;
			var id = setInterval(function(){
				var timePassed = new Date - start;
				var progress = timePassed / opts.duration
				if(progress > 1){
					progress = 1;
				}
				var delta = opts.delta(progress);
				opts.step(delta);
				if (progress == 1){
					clearInterval(id);
					opts.callback();
				}
			}, opts.dalay || 17);
		}
		
		/* Open new tab when slide clicked */
		$(function(){
			$('.slide').click(function(){
				window.open($(this).attr("image-link"), "_blank");
			});
		});
		
		/* Loads template when image-bar-image clicked */
		$(function(){
			$('.image-bar-image').click(function(){
				location.assign($(this).attr("image-bar-image-link"), "_blank");
			});
		});
		
		window.onload = init;
    </script>
	
  </body>
  
</html>

